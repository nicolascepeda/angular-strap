/**
 * angular-strap
 * @version v2.0.0-beta.4 - 2015-04-03
 * @link http://mgcrea.github.io/angular-strap
 * @author [object Object]
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"animation-fade",prefixClass:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","dimensions",function(b,c,d,e,f,g,h,i,j){function k(b){function i(a){a.target===a.currentTarget&&("static"===k.backdrop?j.focus():j.hide())}var j={},k=angular.extend({},a,b);j.$promise=e.when(f.get(k.template)||g.get(k.template));var r=j.$scope=k.scope&&k.scope.$new()||c.$new();k.element||k.container||(k.container="body"),k.scope||l(["title","content"],function(a){k[a]&&(r[a]=k[a])}),r.$hide=function(){r.$$postDigest(function(){j.hide()})},r.$show=function(){r.$$postDigest(function(){j.show()})},r.$toggle=function(){r.$$postDigest(function(){j.toggle()})},k.contentTemplate&&(j.$promise=j.$promise.then(function(a){angular.isObject(a)&&(a=a.data);var c=angular.element(a);return e.when(f.get(k.contentTemplate)||g.get(k.contentTemplate,{cache:f})).then(function(a){angular.isObject(a)&&(a=a.data);var d=q('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var s,t,u=m('<div class="'+k.prefixClass+'-backdrop"/>');return j.$promise.then(function(a){angular.isObject(a)&&(a=a.data),k.html&&(a=a.replace(p,'ng-bind-html="')),a=n.apply(a),s=d(a),j.init()}),j.init=function(){k.show&&r.$$postDigest(function(){j.show()})},j.destroy=function(){t&&(t.remove(),t=null),u&&(u.remove(),u=null),r.$destroy()},j.show=function(){var a=k.container?q(k.container):null,b=k.container?null:k.element;t=j.$element=s(r,function(a,b){}),t.css({display:"block"}).addClass(k.placement),k.animation&&(k.backdrop&&u.addClass("animation-fade"),t.addClass(k.animation)),k.backdrop&&h.enter(u,o,null,function(){}),h.enter(t,a,b,function(){}),r.$isShown=!0,r.$$phase||r.$digest(),j.focus(),o.addClass(k.prefixClass+"-open"),k.backdrop&&(t.on("click",i),u.on("click",i)),k.keyboard&&t.on("keyup",j.$onKeyUp)},j.hide=function(){h.leave(t,function(){o.removeClass(k.prefixClass+"-open")}),k.backdrop&&h.leave(u,function(){}),r.$$phase||r.$digest(),r.$isShown=!1,k.backdrop&&(t.off("click",i),u.off("click",i)),k.keyboard&&t.off("keyup",j.$onKeyUp)},j.toggle=function(){r.$isShown?j.hide():j.show()},j.focus=function(){t[0].focus()},j.$onKeyUp=function(a){27===a.which&&j.hide()},j}var l=angular.forEach,m=angular.element,n=String.prototype.trim,o=m(b.document.body),p=/ng-bind="/gi,q=function(a,b){return m((b||document).querySelectorAll(a))};return k}]}).directive("bsModal",["$window","$location","$sce","$modal",function(a,b,c,d){return{restrict:"EAC",scope:!0,link:function(a,b,c,e){var f={scope:a,element:b,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(c[a])&&(f[a]=c[a])}),angular.forEach(["title","content"],function(b){c[b]&&c.$observe(b,function(c,d){a[b]=c})}),c.bsModal&&a.$watch(c.bsModal,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var g=d(f);b.on(c.trigger||"click",g.toggle),a.$on("$destroy",function(){g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]);
//# sourceMappingURL=modal.min.map