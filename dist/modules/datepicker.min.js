/**
 * angular-strap
 * @version v2.0.0-beta.4 - 2015-04-03
 * @link http://mgcrea.github.io/angular-strap
 * @author [object Object]
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var a=this.defaults={animation:"animation-fade",prefixClass:"datepicker",placement:"bottom-left",template:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,weekStart:0};this.$get=["$window","$document","$rootScope","$sce","$locale","dateFilter","datepickerViews","$tooltip","$timeout",function(b,c,d,e,f,g,h,i,j){function k(b,c,d){function e(a){a.selected=g.$isSelected(a.date)}function f(){b[0].focus()}var g=i(b,angular.extend({},a,d)),k=d.scope,n=g.$options,o=g.$scope,p=h(g);g.$views=p.views;var q=p.viewDate;o.$mode=n.startView;var r=g.$views[o.$mode];o.$select=function(a){g.select(a)},o.$selectPane=function(a){g.$selectPane(a)},o.$toggleMode=function(){g.setMode((o.$mode+1)%g.$views.length)},g.update=function(a){isNaN(a.getTime())?r.built||g.$build():(g.$date=a,r.update.call(r,a))},g.select=function(a,b){angular.isDate(a)||(a=new Date(a)),c.$dateValue.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),!o.$mode||b?(c.$setViewValue(angular.copy(c.$dateValue)),c.$render(),n.autoclose&&!b&&j(function(){g.hide(!0)})):(angular.extend(q,{year:a.getFullYear(),month:a.getMonth(),date:a.getDate()}),g.setMode(o.$mode-1),g.$build())},g.setMode=function(a){o.$mode=a,r=g.$views[o.$mode],g.$build()},g.$build=function(){r.build.call(r)},g.$updateSelected=function(){for(var a=0,b=o.rows.length;b>a;a++)angular.forEach(o.rows[a],e)},g.$isSelected=function(a){return r.isSelected(a)},g.$selectPane=function(a){var b=r.steps,c=new Date(Date.UTC(q.year+(b.year||0)*a,q.month+(b.month||0)*a,q.date+(b.day||0)*a));angular.extend(q,{year:c.getUTCFullYear(),month:c.getUTCMonth(),date:c.getUTCDate()}),g.$build()},g.$onMouseDown=function(a){if(a.preventDefault(),a.stopPropagation(),l){var b=angular.element(a.target);"button"!==b[0].nodeName.toLowerCase()&&(b=b.parent()),b.triggerHandler("click")}},g.$onKeyDown=function(a){if(/(38|37|39|40|13)/.test(a.keyCode)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return o.$mode?o.$apply(function(){g.setMode(o.$mode-1)}):g.hide(!0);r.onKeyDown(a),k.$digest()}};var s=g.init;g.init=function(){return m&&n.useNative?(b.prop("type","date"),void b.css("-webkit-appearance","textfield")):(l&&(b.prop("type","text"),b.attr("readonly","true"),b.on("click",f)),c.$dateValue&&(g.$date=c.$dateValue,g.$build()),void s())};var t=g.destroy;g.destroy=function(){m&&n.useNative&&b.off("click",f),t()};var u=g.show;g.show=function(){u(),setTimeout(function(){g.$element.on(l?"touchstart":"mousedown",g.$onMouseDown),n.keyboard&&b.on("keydown",g.$onKeyDown)})};var v=g.hide;return g.hide=function(a){g.$element.off(l?"touchstart":"mousedown",g.$onMouseDown),n.keyboard&&b.off("keydown",g.$onKeyDown),v(a)},g}var l=(angular.element(b.document.body),"createTouch"in b.document),m=/(iP(a|o)d|iPhone)/g.test(b.navigator.userAgent);return a.lang||(a.lang=f.id),k.defaults=a,k}]}).provider("$dateParser",["$localeProvider",function(a){var b=Date.prototype,c=this.defaults={format:"shortDate"};this.$get=["$locale",function(a){c.lang||(c.lang=a.id);var d=function(c){function d(a){var b,c=Object.keys(j),d=[],e=[];for(b=0;b<c.length;b++)if(-1===["/",".","-"," "].indexOf(c[b])&&a.split(c[b]).length>1){var f=a.search(c[b]);a=a.split(c[b]).join(""),j[c[b]]&&(d[f]=j[c[b]])}return angular.forEach(d,function(a){e.push(a)}),e}function e(a){var b,c=Object.keys(i);for(b=0;b<c.length;b++)a=a.split(c[b]).join("${"+b+"}");for(b=0;b<c.length;b++)a=a.split("${"+b+"}").join(i[c[b]]);return new RegExp("^"+a+"$",["i"])}var f={};window.$locale=a;var g,h,i={"/":"[\\/]","-":"[-]",".":"[.]"," ":"[\\s]",EEEE:"((?:"+a.DATETIME_FORMATS.DAY.join("|")+"))",EEE:"((?:"+a.DATETIME_FORMATS.SHORTDAY.join("|")+"))",dd:"((?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1})))",d:"((?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1})))",MMMM:"((?:"+a.DATETIME_FORMATS.MONTH.join("|")+"))",MMM:"((?:"+a.DATETIME_FORMATS.SHORTMONTH.join("|")+"))",MM:"((?:[0]?[1-9]|[1][012]))",M:"((?:[0]?[1-9]|[1][012]))",yyyy:"((?:(?:[1]{1}[0-9]{1}[0-9]{1}[0-9]{1})|(?:[2]{1}[0-9]{3}))(?![[0-9]]))",yy:"((?:(?:[0-9]{1}[0-9]{1}))(?![[0-9]]))"},j={dd:b.setUTCDate,d:b.setUTCDate,MMMM:function(b){return this.setUTCMonth(a.DATETIME_FORMATS.MONTH.indexOf(b))},MMM:function(b){return this.setUTCMonth(a.DATETIME_FORMATS.SHORTMONTH.indexOf(b))},MM:function(a){return this.setUTCMonth(1*a-1)},M:function(a){return this.setUTCMonth(1*a-1)},yyyy:b.setUTCFullYear,yy:function(a){return this.setUTCFullYear(2e3+1*a)},y:b.setUTCFullYear};return f.init=function(){f.$format=a.DATETIME_FORMATS[c.format]||c.format,g=e(f.$format),h=d(f.$format)},f.isValid=function(a){return angular.isDate(a)?!isNaN(a.getTime()):g.test(a)},f.parse=function(a,b){if(angular.isDate(a))return a;var c=g.exec(a);if(!c)return!1;for(var d=b||new Date(0),e=0;e<c.length-1;e++)h[e]&&h[e].call(d,c[e+1]);return d},f.init(),f};return d}]}]).directive("bsDatepicker",["$window","$parse","$q","$locale","dateFilter","$datepicker","$dateParser","$timeout",function(a,b,c,d,e,f,g,h){{var i=/(iP(a|o)d|iPhone)/g.test(a.navigator.userAgent);a.requestAnimationFrame||a.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(a,b,c,d){var h={scope:a,controller:d};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","useNative","lang"],function(a){angular.isDefined(c[a])&&(h[a]=c[a])}),i&&h.useNative&&(h.dateFormat="yyyy-MM-dd");var j=f(b,d,h);h=j.$options,angular.forEach(["minDate","maxDate"],function(a){angular.isDefined(c[a])&&c.$observe(a,function(b){if("today"===b){var c=new Date;j.$options[a]=+new Date(c.getFullYear(),c.getMonth(),c.getDate()+("maxDate"===a?1:0),0,0,0,"minDate"===a?0:-1)}else j.$options[a]=angular.isString(b)&&b.match(/^".+"$/)?+new Date(b.substr(1,b.length-2)):+new Date(b);!isNaN(j.$options[a])&&j.$build()})}),a.$watch(c.ngModel,function(a,b){j.update(d.$dateValue)},!0);var k=g({format:h.dateFormat,lang:h.lang});d.$parsers.unshift(function(a){var b=k.parse(a,d.$dateValue);if(!b||isNaN(b.getTime()))return void d.$setValidity("date",!1);var c=b.getTime()>=h.minDate&&b.getTime()<=h.maxDate;return d.$setValidity("date",c),d.$dateValue=b,"string"===h.dateType?e(a,h.dateFormat):"number"===h.dateType?d.$dateValue.getTime():"iso"===h.dateType?d.$dateValue.toISOString():d.$dateValue}),d.$formatters.push(function(a){return d.$dateValue=angular.isDate(a)?a:new Date(a),d.$dateValue}),d.$render=function(){b.val(isNaN(d.$dateValue.getTime())?"":e(d.$dateValue,h.dateFormat))},a.$on("$destroy",function(){j.destroy(),h=null,j=null})}}}]).provider("datepickerViews",function(){function a(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$locale","$sce","dateFilter",function(b,c,d){return function(e){var f=e.$scope,g=e.$options,h=b.DATETIME_FORMATS.SHORTDAY,i=h.slice(g.weekStart).concat(h.slice(0,g.weekStart)),j=c.trustAsHtml('<th class="dow text-center">'+i.join('</th><th class="dow text-center">')+"</th>"),k=e.$date||new Date,l={year:k.getFullYear(),month:k.getMonth(),date:k.getDate()},m=(6e4*k.getTimezoneOffset(),[{format:"dd",split:7,height:250,steps:{month:1},update:function(a,b){!this.built||b||a.getFullYear()!==l.year||a.getMonth()!==l.month?(angular.extend(l,{year:e.$date.getFullYear(),month:e.$date.getMonth(),date:e.$date.getDate()}),e.$build()):a.getDate()!==l.date&&(l.date=e.$date.getDate(),e.$updateSelected())},build:function(){for(var b,c=new Date(l.year,l.month,1),h=new Date(+c-864e5*(c.getUTCDay()+1-g.weekStart)),i=[],k=0;35>k;k++)b=new Date(h.getFullYear(),h.getMonth(),h.getDate()+k),i.push({date:b,label:d(b,this.format),selected:e.$date&&this.isSelected(b),muted:b.getMonth()!==l.month,disabled:this.isDisabled(b)});f.title=d(c,"MMMM yyyy"),f.labels=j,f.rows=a(i,this.split),f.width=100/this.split,f.height=(this.height-75)/f.rows.length,this.built=!0},isSelected:function(a){return e.$date&&a.getFullYear()===e.$date.getFullYear()&&a.getMonth()===e.$date.getMonth()&&a.getDate()===e.$date.getDate()},isDisabled:function(a){return a.getTime()<g.minDate||a.getTime()>g.maxDate},onKeyDown:function(a){var b=e.$date.getTime();37===a.keyCode?e.select(new Date(b-864e5),!0):38===a.keyCode?e.select(new Date(b-6048e5),!0):39===a.keyCode?e.select(new Date(b+864e5),!0):40===a.keyCode&&e.select(new Date(b+6048e5),!0)}},{name:"month",format:"MMM",split:4,height:250,steps:{year:1},update:function(a,b){this.built&&a.getFullYear()===l.year?a.getMonth()!==l.month&&(angular.extend(l,{month:e.$date.getMonth(),date:e.$date.getDate()}),e.$updateSelected()):(angular.extend(l,{year:e.$date.getFullYear(),month:e.$date.getMonth(),date:e.$date.getDate()}),e.$build())},build:function(){for(var b,c=(new Date(l.year,0,1),[]),g=0;12>g;g++)b=new Date(l.year,g,1),c.push({date:b,label:d(b,this.format),selected:e.$isSelected(b),disabled:this.isDisabled(b)});f.title=d(b,"yyyy"),f.labels=!1,f.rows=a(c,this.split),f.width=100/this.split,f.height=(this.height-50)/f.rows.length,this.built=!0},isSelected:function(a){return e.$date&&a.getFullYear()===e.$date.getFullYear()&&a.getMonth()===e.$date.getMonth()},isDisabled:function(a){var b=+new Date(a.getFullYear(),a.getMonth()+1,0);return b<g.minDate||a.getTime()>g.maxDate},onKeyDown:function(a){var b=e.$date.getMonth();37===a.keyCode?e.select(e.$date.setMonth(b-1),!0):38===a.keyCode?e.select(e.$date.setMonth(b-4),!0):39===a.keyCode?e.select(e.$date.setMonth(b+1),!0):40===a.keyCode&&e.select(e.$date.setMonth(b+4),!0)}},{name:"year",format:"yyyy",split:4,height:250,steps:{year:12},update:function(a,b){!this.built||b||parseInt(a.getFullYear()/20,10)!==parseInt(l.year/20,10)?(angular.extend(l,{year:e.$date.getFullYear(),month:e.$date.getMonth(),date:e.$date.getDate()}),e.$build()):a.getFullYear()!==l.year&&(angular.extend(l,{year:e.$date.getFullYear(),month:e.$date.getMonth(),date:e.$date.getDate()}),e.$updateSelected())},build:function(){for(var b,c=l.year-l.year%(3*this.split),g=[],h=0;12>h;h++)b=new Date(c+h,0,1),g.push({date:b,label:d(b,this.format),selected:e.$isSelected(b),disabled:this.isDisabled(b)});f.title=g[0].label+"-"+g[g.length-1].label,f.labels=!1,f.rows=a(g,this.split),f.width=100/this.split,f.height=(this.height-50)/f.rows.length,this.built=!0},isSelected:function(a){return e.$date&&a.getFullYear()===e.$date.getFullYear()},isDisabled:function(a){var b=+new Date(a.getFullYear()+1,0,0);return b<g.minDate||a.getTime()>g.maxDate},onKeyDown:function(a){var b=e.$date.getFullYear();37===a.keyCode?e.select(e.$date.setYear(b-1),!0):38===a.keyCode?e.select(e.$date.setYear(b-4),!0):39===a.keyCode?e.select(e.$date.setYear(b+1),!0):40===a.keyCode&&e.select(e.$date.setYear(b+4),!0)}}]);return{views:g.minView?Array.prototype.slice.call(m,g.minView):m,viewDate:l}}}]}),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(a){a.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker"><table tabindex="-1" height="100%"><thead><tr class="text-center"><th><button type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th><th colspan="5" style="width: 100%"><button type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th></tr><tr ng-show2="labels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td colspan="7" style="letter-spacing: -4px"><span ng-repeat="(j, el) in row" class="text-center"><button type="button" class="btn btn-default" style="height:{{height}}px;width:{{width}}%" ng-class="{\'btn-primary\': el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></span></td></tr></tbody></table></div>')}]);
//# sourceMappingURL=datepicker.min.map